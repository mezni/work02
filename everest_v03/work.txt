i want to design a rust microserice in DDD to register and authenticate users with swagger support, 
4 layers domain , infrastructure , application and interfaces, no local db , 
but integration with keycloak, users are self-registered so give me codebase files list and endpoints list  


# Step 1: Check if server is running
curl http://localhost:3000/health

# Step 2: Register a user
curl -X POST http://localhost:8081/api/v1/register \
  -H "Content-Type: application/json" \
  -d '{"username":"john", "firstname":"X", "lastname":"X", "email":"john@example.com","password":"password123"}'

# Step 3: Login and save the token
TOKEN=$(curl -s -X POST http://localhost:3000/login \
  -H "Content-Type: application/json" \
  -d '{"username":"john","password":"password123"}' | jq -r '.access_token')

# Step 4: Verify the token
curl -X POST http://localhost:3000/verify \
  -H "Content-Type: application/json" \
  -d "{\"token\":\"$TOKEN\"}"

# Or verify with pretty output
curl -X POST http://localhost:3000/verify \
  -H "Content-Type: application/json" \
  -d "{\"token\":\"$TOKEN\"}" | jq


# For Keycloak Admin API (Registration)
keycloak = "26.4" 
# For Keycloak ROPC Flow (Login)
rust-keycloak = "0.0.7"


Client	Type	Purpose
authclient	Public	Frontend login / OIDC flow
backend-admin	Confidential	Backend admin: create users, assign roles, set attributes


auth-client is a public client.
  Typically used for frontend login flows (e.g., browser-based OAuth).
  Can get tokens for users but cannot create users or assign roles.
  Still useful if your frontend calls Keycloak directly for login or OpenID Connect flows.

backend-admin is a confidential client.
  Used only by the backend to manage users via the admin API.
  Can create users, assign roles, set attributes (company_name, station_name).
  Frontend should not use this client directly.




src/
├── domain/
│   ├── mod.rs
│   ├── user.rs
│   ├── errors.rs
│   └── user_repository.rs
├── application/
│   ├── mod.rs
│   ├── register_service.rs
│   ├── authenticate_service.rs
│   ├── user_dto.rs
│   └── errors.rs
├── infrastructure/
│   ├── mod.rs
│   ├── keycloak_config.rs
│   ├── keycloak_user_repository.rs
│   └── errors.rs
├── interfaces/
│   ├── mod.rs
│   ├── http/
│   │   ├── mod.rs
│   │   └── user_handler.rs
│   └── swagger/
│       ├── mod.rs
│       └── swagger.rs
├── config.rs
├── errors.rs
├── lib.rs
├── logger.rs
├── main.rs
└── Cargo.toml


Here's an updated version:

    User Registration
        POST /users/register: Register a new user
    User Authentication
        POST /users/authenticate: Authenticate a user
    User Management
        GET /users: Get a list of users (admin only)
        GET /users/{id}: Get a user by ID
        PUT /users/{id}: Update a user
        DELETE /users/{id}: Delete a user (admin only)
    Password Management
        POST /users/{id}/change-password: Change a user's password






Auth Service

    The auth service will handle user registration and authentication.
    It will redirect the user to Keycloak for authentication.
    It will verify the token generated by Keycloak and extract the claims.
    It will use the claims to authenticate the user and authorize access to protected resources.

Keycloak Configuration

    Keycloak will be configured to include custom claims in the token (e.g. role, company_name, station_name).
    Keycloak will generate a token that includes these claims when the user is authenticated.

Integration

    The auth service will redirect the user to Keycloak for authentication.
    Keycloak will authenticate the user and generate a token that includes the custom claims.
    The token will be returned to the auth service.
    The auth service will verify the token and extract the claims.
    The auth service will use the claims to authenticate the user and authorize access to protected resources.

Here's a high-level overview of the flow:
    User requests to register or login to the application.
    When a user registers, the following will be added by default:
        Role: USER (or any other default role)
        Attributes:
            company_name: "" (empty string)
            station_name: "" (empty string)
    Auth service redirects the user to Keycloak for authentication.
    Keycloak authenticates the user and generates a token that includes custom claims (e.g. role, company_name, station_name).
    Keycloak returns the token to the auth service.
    Auth service verifies the token and extracts the claims.
    Auth service uses the claims to authenticate the user and authorize access to protected resources.